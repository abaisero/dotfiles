#!/usr/bin/zsh

SESSION_NAME="thp"

tmux has-session -t ${SESSION_NAME}
if [ $? != 0 ]
then
  # vim window
  tmux new-session -n pytk -s ${SESSION_NAME} -d
  tmux send-keys -t ${SESSION_NAME} 'cd /home/bais/git/pytk/pytk' C-m
  tmux send-keys -t ${SESSION_NAME} 'vim ml.py postit.py' C-m

  tmux split-window -v -t ${SESSION_NAME}
  tmux send-keys -t ${SESSION_NAME} 'cd /home/bais/git/pytk/tests' C-m
  tmux send-keys -t ${SESSION_NAME} 'vim test_ml.py test_postit.py' C-m

  # test window
  tmux new-window -t ${SESSION_NAME} -n tests
  tmux send-keys -t ${SESSION_NAME} 'cd /home/bais/git/pytk' C-m
  tmux send-keys -t ${SESSION_NAME} 'pytk' C-m
  tmux send-keys -t ${SESSION_NAME} 'python setup.py test'

  tmux select-window -t pytk
fi
tmux -2 attach -t ${SESSION_NAME}

exit 0
