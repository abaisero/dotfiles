#!/usr/bin/zsh

SESSION_NAME="relogeom"

tmux has-session -t ${SESSION_NAME}
if [ $? != 0 ]
then
  # vim window
  tmux new-session -n vim -s ${SESSION_NAME} -d
  tmux send-keys -t ${SESSION_NAME} 'cd /home/bais/git/relogeom/src/relogeom' C-m
  tmux send-keys -t ${SESSION_NAME} 'vim' C-m

  tmux split-window -v -t ${SESSION_NAME}
  tmux send-keys -t ${SESSION_NAME} 'cd /home/bais/git/relogeom/src/relogeom/bin' C-m
  tmux send-keys -t ${SESSION_NAME} '. activate relogeom' C-m
  tmux send-keys -t ${SESSION_NAME} '. ros rfde' C-m
  tmux send-keys -t ${SESSION_NAME} 'python gui.py'

  # test window
  tmux new-window -t ${SESSION_NAME} -n ros
  tmux send-keys -t ${SESSION_NAME} '. ros rfde' C-m
  tmux send-keys -t ${SESSION_NAME} 'roscore'

  tmux split-window -v -t ${SESSION_NAME}
  tmux send-keys -t ${SESSION_NAME} '. ros rfde' C-m
  tmux send-keys -t ${SESSION_NAME} 'roslaunch rfde rfde.launch'

  tmux split-window -v -t ${SESSION_NAME}
  tmux send-keys -t ${SESSION_NAME} '. ros rfde' C-m
  tmux send-keys -t ${SESSION_NAME} 'rosrun rqt_rviz rqt_rviz'

  tmux select-window -t vim
fi
tmux -2 attach -t ${SESSION_NAME}

exit 0
