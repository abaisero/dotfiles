#!/usr/bin/env python
from __future__ import division

import numpy as np
import pandas as pd

import sys

gdict = dict(A=4, B=3, C=2, D=1, E=0)

for fname in sys.argv[1:]:
    df = pd.read_csv(fname)
    df_ = df[df.Grade != 'P']
    Grades = pd.Series(map(gdict.__getitem__, df_.Grade), index=df_.index)

    gpa = sum(Grades * df_.Credits) / sum(df_.Credits)
    print '{} : {}'.format(fname, gpa)



# print df.loc[df.Grade.notnull(), ['Grade', 'Credits']]

# gradedict = dict(A=4, B=3, C=2, D=1, E=0)

# grades = [(gradedict[grade], credits) for grade, credits in grades]

# GPA = sum(g * c for g, c in grades) / sum(c for _, c in grades)
# print 'GPA: {}'.format(GPA)
